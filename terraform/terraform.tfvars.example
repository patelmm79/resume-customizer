# ============================================================================
# GOOGLE CLOUD RUN DEPLOYMENT (Main Application)
# ============================================================================

project = "your-gcp-project-id"
region = "us-central1"
service_name = "resume-customizer"
artifact_repo = "resume-customizer-repo"

# image: Leave empty to let Terraform construct the path automatically
# (recommended). Terraform will use: ${region}-docker.pkg.dev/${project}/${artifact_repo}/resume-customizer:latest
# Only set this if you want to override with a custom image path.
image = ""

# GitHub trigger settings (Cloud Build GitHub App integration)
# You must install the Google Cloud Build GitHub App on your repo and provide the installation id.
github_owner = "your-github-owner"
github_repo = "your-repo-name"
github_branch = "main"

# Use two-step apply: set create_runtime_bindings = false on first apply,
# then set to true after the Cloud Run runtime service account exists.
create_runtime_bindings = true

# Environment name for multi-instance deployments
# Use different values (dev, staging, prod) to isolate resources and state
environment = "dev"

# GCS Backend Configuration
# Set these when running terraform init for the first time:
#
#   terraform init \
#     -backend-config="bucket=your-project-id-terraform-state" \
#     -backend-config="prefix=resume-customizer/dev"
#
# Where:
#   - bucket: your GCS bucket name (must exist beforehand)
#   - prefix: path within bucket (one per environment)
#
# Create the bucket once per project:
#   gsutil mb gs://your-project-id-terraform-state

# -----------------------------------------------------------------------------
# LangSmith Integration (optional)
# Enables tracing and monitoring of LLM calls via LangSmith
# Note: LANGSMITH_PROJECT is automatically set to the service_name (e.g., resume-customizer)
# -----------------------------------------------------------------------------

# Enable LangSmith tracing (true/false)
langsmith_tracing = false

# LangSmith API endpoint (e.g., https://api.smith.langchain.com)
langsmith_endpoint = ""

# LangSmith API key (provide via tfvars, TF_VAR, or CI)
# This will be stored in Secret Manager as: {secret_prefix}-LANGSMITH_API_KEY
# WARNING: Do NOT commit to git if using real credentials
# Use this in development/testing or in CI/CD where the file is generated
langsmith_api_key_value = ""

# To enable LangSmith:
# 1. Create a LangSmith account at https://smith.langchain.com
# 2. Generate an API key at https://smith.langchain.com/settings/keys
# 3. Set langsmith_tracing = true (above)
# 4. Set langsmith_endpoint = "https://api.smith.langchain.com" (above)
# 5. Set langsmith_api_key_value (above) to your API key
# 6. Run: terraform apply

# Methods to provide langsmith_api_key_value:
# - Via terraform.tfvars: Uncomment langsmith_api_key_value = "your-api-key" (development only)
# - Via environment variable: export TF_VAR_langsmith_api_key_value="your-api-key"
# - Via CI/CD: Store in CI secrets and inject into tfvars at runtime

# The API key will be:
# - Stored securely in Google Cloud Secret Manager
# - Retrieved automatically by Cloud Run
# - Available as LANGSMITH_API_KEY environment variable
# - Never logged or exposed in Terraform output

# -----------------------------------------------------------------------------
# LLM provider configuration (placeholders)
# - For secrets, set the Secret Manager secret name (recommended) or provide
#   the raw value here (not recommended for production).
# - Example secret naming convention: GEMINI_API_KEY-prod, ANTHROPIC_API_KEY-staging
# -----------------------------------------------------------------------------

# Which provider to enable by default (options: "gemini", "claude", "custom")
llm_provider = ""

# Google Gemini (recommended): either provide secret name or plain key
# If using Secret Manager, set to the secret resource name (e.g. "GEMINI_API_KEY-prod").
gemini_api_key_secret = ""
gemini_model = "gemini-2.0-flash-exp"

# Anthropic Claude
anthropic_api_key_secret = ""
claude_model = "claude-3-5-sonnet-20241022"

# Custom LLM (OpenAI-compatible / vLLM)
custom_llm_api_key_secret = ""
custom_llm_base_url = ""
custom_llm_model = ""

# Optional: lists of available models (comma-separated)
# gemini_models = "gemini-2.0-flash-exp,gemini-1.5-pro"
# claude_models = "claude-3-5-sonnet-20241022,claude-3-5-haiku-20241022"
# custom_models = "gpt-4-turbo-preview,gpt-4,gpt-3.5-turbo"

# -----------------------------------------------------------------------------
# Additional runtime tuning (custom LLM)
# These control retry/backoff behavior and context limits for custom LLMs.
# -----------------------------------------------------------------------------
# Max retry attempts for custom LLM (used when handling 503/warm-up)
custom_llm_max_retries = 5
# Initial retry delay in seconds (exponential backoff multiplier applied)
custom_llm_initial_retry_delay = 5.0
# Estimated model context limit (tokens) for custom LLMs
custom_llm_context_limit = 32768

# -----------------------------------------------------------------------------
# Secret Manager naming prefix for this application
# To avoid collisions with other projects/apps, set a prefix used when
# creating Secret Manager secret names (e.g. "resume_customizer-prod").
# Use in your CI script when creating or referencing secrets.
# -----------------------------------------------------------------------------
secret_prefix = "resume_customizer"

# ============================================================================
# SETTINGS PERSISTENCE (S3 or GCS for .settings.json storage)
# ============================================================================
#
# CHOOSE ONE: AWS S3 OR GOOGLE CLOUD STORAGE
#
# Settings persistence ensures user settings (LLM provider, formatting, etc.)
# survive cloud deployments and app restarts. This section configures where
# to store the .settings.json file.
#
# OPTION 1: AWS S3 (Recommended for AWS deployments)
# ============================================================================
# Uncomment and modify these lines for S3 deployment
# Leave the GCS section commented out
#
# aws_region = "us-west-2"
# app_name   = "resume-customizer"
#
#
# OPTION 2: Google Cloud Storage (Recommended for GCP deployments)
# ============================================================================
# Uncomment and modify these lines for GCS deployment
# Leave the S3 section above commented out
# NOTE: Remove or comment out the S3 section (aws_region and app_name above)
#
# gcp_project = "my-gcp-project-id"
# gcp_region  = "us-central1"
# app_name    = "resume-customizer"
#
#
# ============================================================================
# Important Notes for Settings Persistence
# ============================================================================
#
# 1. Choose ONE: Either S3 or GCS
#    - Uncomment the S3 section if using AWS
#    - Uncomment the GCS section if using Google Cloud
#    - Keep only one section uncommented
#
# 2. Regional Considerations:
#    - S3: Use any valid AWS region (us-west-2, us-east-1, eu-west-1, etc.)
#    - GCS: Use any valid GCP region (us-central1, us-east1, europe-west1, etc.)
#
# 3. Application Name:
#    - Must be alphanumeric and hyphens only
#    - Used in bucket naming to ensure global uniqueness
#    - Default: "resume-customizer"
#
# 4. Credentials:
#    - AWS: Ensure AWS CLI is configured with credentials
#      Command: aws configure
#      Or set: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY
#    - GCP: Ensure gcloud is authenticated
#      Command: gcloud auth login
#      Or use service account key
#
# 5. Using the Deployment Script (RECOMMENDED):
#    - The deploy-settings.sh or deploy-settings.bat script
#      will automatically configure this section for you
#    - You only need to edit this manually if doing manual deployment
#
# 6. Next Steps After Configuration:
#    1. Run: terraform init
#    2. Run: terraform plan
#    3. Review the plan
#    4. Run: terraform apply
#    5. Save the output (bucket name, credentials needed)
#    6. Add environment variables to your deployment platform
#
# ============================================================================
# READY-TO-USE COMPLETE EXAMPLES
# ============================================================================
# Copy and paste one of the complete configurations below into this file
# (replacing the commented section above)
#
# EXAMPLE A: AWS S3 (us-west-2) - Ready to copy
# ============================================================================
# aws_region = "us-west-2"
# app_name   = "resume-customizer"
#
#
# EXAMPLE B: AWS S3 (eu-west-1 Europe) - Ready to copy
# ============================================================================
# aws_region = "eu-west-1"
# app_name   = "resume-customizer"
#
#
# EXAMPLE C: AWS S3 (us-east-1) - Ready to copy
# ============================================================================
# aws_region = "us-east-1"
# app_name   = "resume-customizer"
#
#
# EXAMPLE D: Google Cloud Storage (us-central1) - Ready to copy
# ============================================================================
# gcp_project = "my-gcp-project-123"
# gcp_region  = "us-central1"
# app_name    = "resume-customizer"
#
#
# EXAMPLE E: Google Cloud Storage (europe-west1) - Ready to copy
# ============================================================================
# gcp_project = "my-gcp-project-123"
# gcp_region  = "europe-west1"
# app_name    = "resume-customizer"
#
#
# EXAMPLE F: Google Cloud Storage (asia-southeast1) - Ready to copy
# ============================================================================
# gcp_project = "my-gcp-project-123"
# gcp_region  = "asia-southeast1"
# app_name    = "resume-customizer"
#

